指定されたissueのTDD/DDD/レイヤードアーキテクチャ実装をレビューします。

以下の手順に従ってください：

1. **引数の確認**:
   - `$ARGUMENTS`が提供されているかを確認
   - 提供されていない場合は即座に終了し、issue番号引数を渡すようユーザーに日本語でプロンプト

2. **実装成果物の収集**:
   - 期待されるすべてのドキュメントとコードを確認:
     - ユースケース仕様: `docs/use_cases/issue-$ARGUMENTS-*.md`
     - ドメインモデル: `docs/domain/issue-$ARGUMENTS-*.md`
     - テスト計画: `docs/test_plan/issue-$ARGUMENTS-*.md`
     - テストレポート: `docs/test_report/issue-$ARGUMENTS-*.md`

3. **ドメイン層のレビュー**:
   - `domain/entities/`のエンティティを確認
   - `domain/value_objects/`の値オブジェクトをレビュー
   - ドメインサービスがDDD原則に従っているかを検証
   - ビジネスルールが適切にカプセル化されているかを確認
   - 集約境界を検証

4. **アプリケーション層のレビュー**:
   - `application/use_cases/`のユースケースを確認
   - DTOが適切に定義されているかを検証
   - ユースケースがビジネスロジックを含まず、オーケストレーションのみを行っているかを確認
   - 関心の分離が適切かをチェック

5. **インフラストラクチャ層のレビュー**:
   - リポジトリ実装を検証
   - データベースモデルとマッパーをチェック
   - インフラストラクチャの詳細がドメインに漏れていないかを確認
   - 外部サービスアダプターをレビュー

6. **プレゼンテーション層のレビュー**:
   - APIエンドポイントまたはCLIコマンドをチェック
   - 入力検証を検証
   - エラーハンドリングとレスポンスをレビュー
   - コントローラーにビジネスロジックが含まれていないかを確認

7. **テストカバレッジ分析**:
   ```bash
   uv run --frozen pytest --cov=domain --cov=application --cov=infrastructure --cov=presentation \
          --cov-report=term-missing
   ```
   - カバレッジが80%以上であることを検証
   - テストされていない重要なパスをチェック

8. **コード品質チェック**:
   ```bash
   # Linting
   uv run --frozen ruff check . --statistics
   
   # 型チェック
   uv run --frozen pyright --stats
   
   # 複雑度分析
   # 循環的複雑度 > 10の関数をチェック
   ```

9. **アーキテクチャ準拠性チェック**:
   - レイヤー間に循環依存がないかを検証
   - 依存方向をチェック: プレゼンテーション → アプリケーション → ドメイン
   - ドメインが外部依存を持たないことを確認
   - 依存性注入の適切な使用を検証

10. **Given-When-Then検証**:
    - ユースケース仕様からのすべてのシナリオが実装されているかを検証
    - 各シナリオのテストカバレッジをチェック
    - テストがGiven-When-Then構造に従っているかを確認

11. **レビューレポートの作成**:
    `docs/review/issue-$ARGUMENTS-review.md`を日本語で作成:

```markdown
# レビューレポート: <機能名>

Issue: #$ARGUMENTS
レビュー日時: <timestamp>

## 実装成果物の確認

### ドキュメント
- [x] ユースケース仕様: docs/use_cases/issue-$ARGUMENTS-*.md
- [x] ドメインモデル設計: docs/domain/issue-$ARGUMENTS-*.md
- [x] テスト計画: docs/test_plan/issue-$ARGUMENTS-*.md
- [x] テストレポート: docs/test_report/issue-$ARGUMENTS-*.md

### 実装レイヤー
- [x] ドメイン層
- [x] アプリケーション層
- [x] インフラストラクチャ層
- [x] プレゼンテーション層

## アーキテクチャ準拠性

### DDD原則
- [ ] ユビキタス言語の一貫性
- [ ] 集約境界の適切性
- [ ] ドメインロジックの純粋性
- [ ] 値オブジェクトの不変性

### レイヤードアーキテクチャ
- [ ] レイヤー間の依存方向
- [ ] 関心の分離
- [ ] 依存性注入の活用

### TDD実践
- [ ] RED-GREEN-REFACTORサイクル
- [ ] テストファースト開発
- [ ] テストカバレッジ: X%

## 品質メトリクス

| メトリクス | 結果 | 基準 | 評価 |
|-----------|------|------|------|
| テストカバレッジ | X% | >80% | ✅/❌ |
| 循環的複雑度（最大） | X | <10 | ✅/❌ |
| Ruffエラー数 | X | 0 | ✅/❌ |
| Pyrightエラー数 | X | 0 | ✅/❌ |

## 改善提案

### 必須対応項目
1. <重要度：高の改善点>
2. <重要度：高の改善点>

### 推奨改善項目
1. <重要度：中の改善点>
2. <重要度：中の改善点>

### 将来的な改善案
1. <重要度：低の改善点>
2. <重要度：低の改善点>

## Given-When-Thenシナリオ実装状況

| シナリオ | 実装 | テスト | カバレッジ |
|---------|------|--------|------------|
| 基本成功ケース | ✅ | ✅ | 100% |
| エッジケース1 | ✅ | ✅ | 100% |
| エラーケース1 | ✅ | ✅ | 100% |

## 総評

<全体的な評価と次のステップの推奨事項>

## チェックリスト

### ドメイン層
- [ ] エンティティの不変条件が守られている
- [ ] 値オブジェクトが適切に使用されている
- [ ] ドメインサービスが必要最小限
- [ ] リポジトリインターフェースが適切

### アプリケーション層
- [ ] ユースケースが薄く保たれている
- [ ] DTOが適切に定義されている
- [ ] トランザクション境界が明確
- [ ] エラーハンドリングが一貫している

### インフラストラクチャ層
- [ ] リポジトリ実装が効率的
- [ ] マッパーが正しく動作
- [ ] 外部サービス連携が適切
- [ ] 設定管理が環境依存を吸収

### プレゼンテーション層
- [ ] APIが RESTful/適切な設計
- [ ] 入力検証が十分
- [ ] エラーレスポンスが一貫
- [ ] ドキュメントが整備されている
```

12. **issueのレビュー情報更新**:
    ```bash
    gh issue comment $ARGUMENTS --body "@<作成者> レビューを完了しました。詳細は docs/review/issue-$ARGUMENTS-review.md をご確認ください。

    主な確認ポイント:
    - テストカバレッジ: X%
    - アーキテクチャ準拠: ✅
    - 改善提案: X件
    
    次のステップ: /apply-feedback でフィードバックを反映してください。"
    ```

13. **サマリーの表示**:
    日本語でレビューサマリーを表示:
    ```
    レビュー完了！
    
    Issue: #$ARGUMENTS
    
    結果サマリー:
    - アーキテクチャ準拠性: ✅
    - テストカバレッジ: X%
    - 品質基準達成: X/Y項目
    
    改善提案:
    - 必須: X件
    - 推奨: Y件
    
    詳細: docs/review/issue-$ARGUMENTS-review.md
    
    次のコマンド:
    - /apply-feedback $ARGUMENTS - レビューフィードバックを反映
    ```

重要な注意事項:
- TDD/DDD/レイヤードアーキテクチャ原則に焦点を当てる
- コード品質とアーキテクチャ準拠性の両方をチェック
- 優先度付きの実行可能なフィードバックを提供
- Given-When-Thenシナリオが完全に実装されているかを検証
- すべての出力とドキュメントは日本語で記述