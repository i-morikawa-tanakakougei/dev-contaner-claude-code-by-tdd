スプリントフィードバックに基づいてシナリオを進化させます。

以下の手順に従ってください：

1. **引数の確認**:

   - `$ARGUMENTS`（機能名）が提供されていることを確認
   - 提供されていない場合は終了し、機能名を渡すようにユーザーに促す

2. **フィードバックソースの分析**:

   - `docs/sprints/`でスプリントレビューノートをチェック
   - 最近の GitHub イシューコメントをレビュー
   - 発見された新しい要件やエッジケースを特定

3. **シナリオタイプの決定**:

   - **拡張**: 既存シナリオに詳細を追加
   - **エッジケース**: 特殊な条件の処理
   - **エラーケース**: 新しいエラーハンドリング要件
   - **新機能**: 発見された完全に新しい機能

4. **シナリオドキュメントの作成または更新**:
   - 既存機能の場合: `docs/use_cases/<feature>.md`を更新
   - 新しい側面の場合: `docs/use_cases/evolved/<feature>-<aspect>.md`を作成
   - 以下のテンプレートを使用（内容は日本語で）:

```markdown
# 進化したユースケース: <機能名>

## 変更理由

- **発見時期**: スプリント<番号>
- **フィードバック源**: <スプリントレビュー/ユーザーフィードバック/テスト>
- **重要度**: <高/中/低>

## 新規/更新シナリオ

### シナリオ<N>: <新しいシナリオ名>

- **Given**: <前提条件>
- **When**: <アクション>
- **Then**: <期待される結果>
- **追加理由**: <なぜこのシナリオが追加されたか>

### シナリオ<N+1>: <エッジケース>

- **Given**: <前提条件>
- **When**: <アクション>
- **Then**: <期待される結果>
- **発見経緯**: <このケースがどのように発見されたか>

## ドメインへの影響

- **新規概念**: <新しいドメイン概念がある場合>
- **既存概念の変更**: <既存概念への変更>
- **ユビキタス言語の追加**:
  - <新しい用語>: <定義>

## 実装への影響

- **影響を受けるレイヤー**: <ドメイン/アプリケーション/インフラストラクチャ/プレゼンテーション>
- **必要な変更**:
  - <変更 1>
  - <変更 2>
- **推定工数**: <日数>

## 関連するコアシナリオ

- [<コアシナリオ名>](../core/<filename>.md)
- 関係性: <どのように関連しているか>
```

5. **新しいシナリオのための GitHub イシュー作成**:

   - シナリオ追加時に直ちにイシューを作成
   - シナリオとチケット間の一貫性を確保
   - コマンドを使用:

   ```bash
   gh issue create \
     --title "実装: <シナリオ名>" \
     --body "## 概要\n<説明>\n\n## シナリオ\n- Given: <条件>\n- When: <アクション>\n- Then: <結果>\n\n## 発見経緯\n<発見コンテキスト>\n\n## 関連ドキュメント\n- [進化シナリオ](docs/use_cases/evolved/<filename>.md)" \
     --label "enhancement,evolved-scenario"
   ```

6. **シナリオインデックスの更新**:
   - 新しいシナリオで`docs/use_cases/index.md`を更新
   - トレーサビリティを維持（内容は日本語で）:

```markdown
## 進化したシナリオ (スプリント<番号>)

- [<シナリオ名>](evolved/<filename>.md) - Issue #<番号>
  - 追加理由: <簡潔な理由>
  - ステータス: <保留中/進行中/完了>
```

7. **一貫性の検証**:

   - 全体ビジョンとの整合性をチェック
   - 既存シナリオとの矛盾がないことを確認
   - ユビキタス言語の一貫性を確認
   - 新しいシナリオのテスト可能性を確認

8. **スプリントドキュメントの更新**:
   - キャパシティがある場合は現在のスプリントのバックログに追加
   - そうでなければ、次のスプリント計画ノートに追加
   - ファイル: `docs/sprints/sprint-<番号>-evolution.md`

```markdown
# スプリント<番号> シナリオ進化

## 追加されたシナリオ

1. <シナリオ名> - Issue #<番号>
   - 優先度: <優先度>
   - 実装タイミング: <このスプリント/次のスプリント>

## ビジョンへの影響

<全体的なビジョンへの影響がある場合>

## 学習事項

<これらの追加につながった学習内容>
```

9. **次のステップの案内**:
   - 作成したイシュー番号を表示
   - 次のコマンドを日本語で推奨:
     - `/create-tests <issue-number>` - 新しいシナリオのテスト作成
     - `/sprint-planning <next-sprint>` - 新しいシナリオで次のスプリントを計画

重要な注意事項:

- 常にイシューとシナリオドキュメントを一緒に作成
- フィードバックと変更間のトレーサビリティを維持
- 明確性のために進化したシナリオをコアと分離
- （基本的な変更でない限り）コアシナリオを直接修正しない
- 既存実装への影響を検討
- すべてのユーザー向け出力は日本語で行う
